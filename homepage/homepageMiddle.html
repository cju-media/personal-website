<div class="hp-mid-wrapper">
    <style>
        .hp-mid-wrapper section {
            display: block;
            text-align: center;
            margin-bottom: 20px;
            width: 100%; /* Ensure section takes full width */
        }

        .hp-mid-wrapper .image-container, 
        .hp-mid-wrapper .video-container {
            overflow: hidden;
            position: relative;
            width: 100%;
            height: 300px; /* Default Desktop Height */
            border-radius: 10px;
            max-width: 2000px;
            transition: all 0.3s ease-in-out;
            margin: 0 auto;
            display: block; /* Force block display */
        }

        /* MOBILE ADJUSTMENTS */
        @media screen and (max-width: 768px) {
            .hp-mid-wrapper .image-container, 
            .hp-mid-wrapper .video-container {
                height: 200px; /* Shorter containers for mobile */
            }
            .hp-mid-wrapper .hidden {
                transform: translateX(-20px); /* Less aggressive shift on mobile */
            }
        }

        .hp-mid-wrapper .cropped-image, 
        .hp-mid-wrapper .cropped-video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
            width: 100%;
            height: 100%;
            transition: all 0.5s ease-in-out;
        }

        /* Animation States */
        .hp-mid-wrapper .hidden {
            opacity: 0;
            filter: blur(5px);
            transform: translateX(-50px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform, opacity; /* Improves mobile performance */
        }

        .hp-mid-wrapper .show {
            opacity: 1;
            filter: blur(0px);
            transform: translateX(0px) !important;
        }

        /* Keep existing text overlay styles... */
        .hp-mid-wrapper .text-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .hp-mid-wrapper .text-overlay, .hp-mid-wrapper .text-overlay1 {
            padding: 8px 15px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
            font-size: 1.2rem;
        }
        .hp-mid-wrapper .text-overlay { background: rgba(255,255,255,0.7); color: #000; }
        .hp-mid-wrapper .text-overlay1 { background: rgba(0,0,0,0.5); color: #fff; }
    </style>

    <section class="hidden">
        <a href="https://www.cameronjohnston.xyz/highlights/music" class="image-container">
            <img id='mid-composer' class='cropped-image'>
            <div class="text-wrapper"><h2 class="text-overlay">COMPOSER</h2></div>
        </a>
    </section>

    <script>
        (function() {
            // Your existing JS logic works fine, 
            // but let's make sure IntersectionObserver fires properly on mobile.
            const initMid = () => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('show');
                        }
                    });
                }, { 
                    threshold: 0.05, // Lower threshold so it triggers earlier on small screens
                    rootMargin: "0px 0px -50px 0px" 
                });

                document.querySelectorAll('.hp-mid-wrapper .hidden').forEach(el => observer.observe(el));
                
                // Rest of your video/image logic...
                // (Set URLs, play videos, etc.)
            };

            window.addEventListener('DOMContentLoaded', initMid);
            // Squarespace compatibility
            if (window.Squarespace) window.Squarespace.onInitialize(Y, initMid);
        })();
    </script>
</div>