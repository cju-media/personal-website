<body>
<script>
    Squarespace.onInitialize(Y, init1)

    function init1() {
        // --- SETTINGS ---------------------------------------
        // 0.1 = fast waterfall, 0.5 = slow waterfall
        const staggerTime = 0.8; 
        // ----------------------------------------------------

        // 1. Setup Headshots
        var headshots = [
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/644efda7500cc0360cc27deb/1682898347204/CameronJohnston_0284.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/644f01e333e0c877df609476/1682899430658/CameronJohnston_0336.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518be13b03f710fc3a0c71/1683065829787/CameronJohnston_0204.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518c04c9c92954c7c3ec91/1683065866184/CameronJohnston_0253.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518e71bcdeba02523343a0/1683066486022/CameronJohnston_0412.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518e941c027e3b22aad8fd/1683066520574/CameronJohnston_0041.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518be13b03f710fc3a0c71/1683065829787/CameronJohnston_0204.JPG", 
            "https://static1.squarespace.com/static/5a6fccf8d74cff4818ad90a2/t/64518bf0b57fdd1b3e56e07e/1683065845110/CameronJohnston_0217.JPG"
        ];
        var randomIndexHeadshots1 = Math.floor(Math.random() * headshots.length);
        var headshot1 = headshots[randomIndexHeadshots1];
        var myHeadshot1 = document.getElementById("myHeadshot1");
        if(myHeadshot1) myHeadshot1.src = headshot1;

        // 2. Setup Letters for Flight & Apply Stagger Variable
        const columns = document.querySelectorAll('.text-block1 h1');
        
        columns.forEach((col, colIndex) => {
            const letters = col.querySelectorAll('.span-class');
            letters.forEach((span, index) => {
                // TAGGING: Save which word this letter belongs to (0, 1, or 2)
                span.dataset.wordIndex = colIndex;
                
                const randomX = (Math.random() - 0.5) * 2400; 
                const randomY = (Math.random() - 0.5) * 2400;
                const randomRotate = (Math.random() - 0.5) * 360; 
                
                span.style.transform = `translate(${randomX}px, ${randomY}px) rotate(${randomRotate}deg)`;
                span.style.opacity = "0"; 

                // Use the variable for delay
                span.style.transitionDelay = `${index * staggerTime}s`;
            });
        });

        // 3. Setup Intersection Observer
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    const letters = entry.target.querySelectorAll('.span-class');
                    letters.forEach((letter) => {
                        letter.classList.add('landed');
                    });
                    entry.target.classList.add('show1');
                } 
            });
        }, { threshold: 0.1 }); 

        const textBlock = document.querySelector('.text-block1');
        if(textBlock) observer.observe(textBlock);
        
        const hiddenElements = document.querySelectorAll('.hidden1');
        hiddenElements.forEach((el) => observer.observe(el));

        // 4. Animation Loops
        const fontClasses = ['font1', 'font2', 'font3', 'font4', 'font5', 'font6'];
        
        const colors = [
            '#2F4F4F', '#4B0082', '#8B0000', '#000080', 
            '#556B2F', '#8B4513', '#2E0854', '#191970'
        ];
        
        const katakanaMap = {
            'A': 'ア', 'B': 'ブ', 'C': 'ク', 'D': 'デ', 'E': 'エ',
            'F': 'フ', 'G': 'グ', 'H': 'ハ', 'I': 'イ', 'J': 'ジ', // Default J is now 'Ji'
            'K': 'ケ', 'L': 'ル', 'M': 'ム', 'N': 'ン', 'O': 'オ',
            'P': 'プ', 'Q': 'キュ', 'R': 'ラ', 'S': 'ス', 'T': 'ト',
            'U': '牛', 'V': 'ヴ', 'W': 'ワ', 'X': 'クス', 'Y': 'ヤ', 'Z': 'ズ' // U is 'Cow'
        };

        function changeFontRandomly(span) {
            // A. Store the original English letter if we haven't yet
            if (!span.dataset.original) {
                span.dataset.original = span.innerText;
            }

            // B. Change Font Family
            fontClasses.forEach(fontClass => span.classList.remove(fontClass));
            const randomIndex = Math.floor(Math.random() * fontClasses.length);
            span.classList.add(fontClasses[randomIndex]);

            // C. 5% Chance to switch to Japanese
            if (Math.random() < 0.05) {
                const originalChar = span.dataset.original.toUpperCase();
                const wordIndex = parseInt(span.dataset.wordIndex); // Retrieve Tag

                // CHECK: Is this "J" inside "Ushijima" (Index 2)?
                if (wordIndex === 2 && originalChar === 'J') {
                     span.innerText = '島'; // Use Island Kanji
                } 
                // OTHERWISE: Use the standard map (where J = 'Ji')
                else if (katakanaMap[originalChar]) {
                    span.innerText = katakanaMap[originalChar];
                }
            } else {
                span.innerText = span.dataset.original;
            }

            const interval = Math.floor(Math.random() * (700 - 300 + 1)) + 300;
            setTimeout(() => changeFontRandomly(span), interval);
        }

        function changeColorRandomly(span) {
            const randomColorIndex = Math.floor(Math.random() * colors.length);
            span.style.color = colors[randomColorIndex];
            const interval = Math.floor(Math.random() * (1500 - 800 + 1)) + 800;
            setTimeout(() => changeColorRandomly(span), interval);
        }

        const allSpans = document.querySelectorAll('.text-block1 .span-class');
        allSpans.forEach(span => {
            changeFontRandomly(span);
            changeColorRandomly(span);
        });
    }
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display&family=VT323&display=swap');

    .font1 { font-family: Arial, sans-serif; }
    .font2 { font-family: "Times New Roman", serif; }
    .font3 { font-family: "Courier New", monospace; }
    .font4 { font-family: "essay-text", monospace; } 
    .font5 { font-family: 'Playfair Display', serif; }
    .font6 { 
        font-family: 'VT323', monospace; 
        font-size: 1.1em; 
    }

    .container1 {
        display: flex;
        flex-direction: row;
        align-items: center;      
        justify-content: center;  
        width: 100%;
        max-width: 100vw;
        margin: 0 auto;
        padding: 20px; 
        min-height: 350px; 
        gap: 3vw;
        box-sizing: border-box;
        overflow: visible; 
        contain: layout;   
    }

    .image-left1 {
        flex: 0 1 35vw; 
        max-width: 450px;
    }

    .image-left1 img {
        width: 100%;
        height: auto; 
        display: block;
        border-radius: 15px;
    }

    .text-block1 {
        flex: 0 0 auto;
        display: flex; 
        flex-direction: row; 
        justify-content: center;
        align-items: flex-start; 
        gap: 40px; 
        perspective: 1000px;
        margin: auto; 
    }

    .text-block1 br { display: none !important; }

    .text-block1 h1 {
        display: flex;
        flex-direction: column; 
        align-items: center; 
        font-size: clamp(16px, 3.5vw, 40px);
        margin: 0; 
        padding: 0;
        line-height: 1.1; 
        height: auto; 
        width: auto;
    }

    /* --- STABILITY FIX --- */
    .span-class {
        /* Use Flexbox centering to kill baseline jitter */
        display: flex; 
        justify-content: center;
        align-items: center;
        
        /* Rigid Dimensions */
        width: 1.4em; 
        height: 1.4em;
        
        /* Important: Clip anything that exceeds the box */
        overflow: hidden; 

        /* Standard animation stuff */
        z-index: 4;
        position: relative;
        will-change: transform, opacity;
        transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 1.5s ease-out;
        margin-bottom: 5px;
        opacity: 0; 
    }

    .span-class.landed {
        transform: translate(0, 0) rotate(0deg) !important;
        opacity: 1 !important;
    }

    @media only screen and (max-width: 800px) {
        .container1 {
            flex-direction: column;
            gap: 20px;
            padding: 40px 10px;
            min-height: 600px; 
            overflow: hidden; 
        }
        .image-left1 {
            width: 65vw;
            max-width: 300px;
        }
        .text-block1 {
            gap: 20px; 
        }
        .text-block1 h1 {
            font-size: 6vw; 
        }
    }

    .hidden1 {
        opacity: 0;
        filter: blur(5px);
        transition: all 1s ease-out;
    }

    .show1 {
        opacity: 1;
        filter: blur(0);
    }
</style>

    <div class="container1">
        <div class="text-block1">
            <h1>
                <span class="span-class">C</span><span class="span-class">A</span><span class="span-class">M</span><span class="span-class">E</span><span class="span-class">R</span><span class="span-class">O</span><span class="span-class">N</span>
            </h1>
            <br>
            <h1>
                <span class="span-class">J</span><span class="span-class">O</span><span class="span-class">H</span><span class="span-class">N</span><span class="span-class">S</span><span class="span-class">T</span><span class="span-class">O</span><span class="span-class">N</span>
            </h1>
            <br>
             <h1>
                <span class="span-class">U</span><span class="span-class">S</span><span class="span-class">H</span><span class="span-class">I</span><span class="span-class">J</span><span class="span-class">I</span><span class="span-class">M</span><span class="span-class">A</span>
            </h1>
        </div>
    </div>

</body>